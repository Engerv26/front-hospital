<div class="user-container">
  <h2>Usuarios Registrados</h2>

  <div class="toolbar">
    <button class="create" (click)="openForm()">+ Crear Usuario</button>
    <button class="refresh" (click)="forceReloadUsers()" [disabled]="isLoading">
      ðŸ”„ {{ isLoading ? 'Cargando...' : 'Actualizar' }}
    </button>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Correo</th>
          <th>TelÃ©fono</th>
          <th>Tipo de Usuario</th>
          <th>Departamento</th>
          <th>Estado</th>
          <th>AcciÃ³n</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let u of users">
          <td>{{ u.id }}</td>
          <td>{{ u.firstName }} {{ u.lastName }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.phoneNumber }}</td>
          <td>{{ u.userType?.name || u.userTypeId }}</td>
          <td>{{ u.department?.name || u.departmenId }}</td>
          <td>
            <span
              class="badge"
              [ngClass]="{
                'badge-activo': u.state?.name === 'Activo',
                'badge-inactivo': u.state?.name === 'Inactivo'
              }"
            >
              {{ u.state?.name || 'Activo' }}
            </span>
          </td>
          <td>
            <button class="edit" (click)="openForm(u)">Editar</button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Mensaje de carga -->
    <div *ngIf="isLoading" style="text-align: center; padding: 20px">Cargando usuarios...</div>

    <!-- Mensaje cuando no hay usuarios -->
    <div *ngIf="users.length === 0 && !isLoading" style="text-align: center; padding: 20px">
      No se encontraron usuarios
    </div>
  </div>
</div>
